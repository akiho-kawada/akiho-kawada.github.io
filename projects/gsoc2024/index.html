<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Google Summer of Code 2024 | Akiho Kawada </title> <meta name="author" content="Akiho Kawada"> <meta name="description" content="Transforming the OpenHW High Performance Data Cache into a High Performance Instruction Cache"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%F0%9F%8C%B8&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://akiho-kawada.github.io/projects/gsoc2024/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Akiho</span> Kawada </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications </a> </li> <li class="nav-item active"> <a class="nav-link" href="/projects/">projects <span class="sr-only">(current)</span> </a> </li> <li class="nav-item "> <a class="nav-link" href="/assets/pdf/cv_akiho_kawada.pdf">cv </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Google Summer of Code 2024</h1> <p class="post-description">Transforming the OpenHW High Performance Data Cache into a High Performance Instruction Cache</p> </header> <article> <p>Mentor: Jonathan Balkind, César Fuguet Tortolero, Noelia Oliete Escuín</p> <p>Organization: <a href="https://fossi-foundation.org/" rel="external nofollow noopener" target="_blank">Free and Open Source Silicon Foundation</a></p> <p>Project Page: <a href="https://summerofcode.withgoogle.com/programs/2024/projects/zTms74CY" rel="external nofollow noopener" target="_blank">here!</a></p> <p><br></p> <h2 id="synopsis">Synopsis</h2> <p>As computing technology advances, the need for flexible and high-performance cache solutions is growing. The importance of cache designs that meet different needs is increasing, and new frameworks are being developed.</p> <p>The <a href="https://github.com/openhwgroup/cva6" rel="external nofollow noopener" target="_blank">CVA6/Ariane</a> is an open-source RISC-V processor, and there is active growth in its ecosystem and its surrounding technologies, in addition to the development of the core itself. The CVA6/Ariane core supports several different L1 data caches for different contexts and user demands, and HPDC is currently an available high performance data cache for the CVA6/Ariane.</p> <p><a href="https://github.com/openhwgroup/cv-hpdcache" rel="external nofollow noopener" target="_blank">HPDC</a> is an open-source, Out-of-Order L1 data cache that supports multi-request and multi-issue, capable of handling multiple requests and cache misses concurrently.</p> <p>In this project, we focus on extending the HPDC to make it usable as an instruction cache.</p> <p><br> <br></p> <h2 id="project-idea">Project Idea</h2> <p>The main goal of this project can be summarized in Figures 1 and 2. Figure 1 shows the CVA6/Ariane design using HPDC as a data cache and the default instruction cache as the instruction cache. In contrast, Figure 2 shows HPDC being used as both the data cache and the instruction cache.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/ariane_cache-480.webp 480w,/assets/img/ariane_cache-800.webp 800w,/assets/img/ariane_cache-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/ariane_cache.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="riane and cache" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p><br> <br></p> <h2 id="progress-report">Progress Report</h2> <ul> <li> <p>creating the HPDC wrapper <span style="color: darkviolet; ">【completed】</span> <a href="https://github.com/openhwgroup/cva6/pull/2173" rel="external nofollow noopener" target="_blank">PR#2173</a></p> <p>We created an hpdcache wrapper module that includes a prefetcher wrapper and an interface adapter with CVA6/Ariane in addition to hpdcache, the main and top module of HPDC. We decided to aim to make this hpdcache wrapper module usable as both an instruction cache and a data cache by instantiating it.</p> </li> <li> <p>making the hpdcache wrapper to function as an instruction cache <span style="color: lime; ">【ongoing】</span> <a href="https://github.com/openhwgroup/cva6/pull/2288" rel="external nofollow noopener" target="_blank">PR#2288</a>, <a href="https://github.com/openhwgroup/cva6/pull/2269" rel="external nofollow noopener" target="_blank">PR#2269</a></p> <p>In this PR, the main focus is on developing/modifying and debugging the adapter that interfaces with the core and the AXI arbiter that interfaces with memory, when using HPDC as an instruction cache.</p> <p>The key feature of the adapter is that it has been designed to support the OBI interface. The OBI interface is a bus interface that is being newly introduced in the CVA6/Ariane. It is assumed that a scratchpad, which does not benefit from the cache, is also used. Therefore there are cases where the physical address is not transmitted to the cache (instead, it is transmitted to the scratchpad). HPDC does not support this case, so we implemented a feature in the adapter that issues a kill request to HPDC when the corresponding physical address is not transmitted. (cf. Figure3)</p> <p>With respect to the AXI arbiter, we modified it to split the ports that handle requests for misses and non-cacheable requests. The previous instruction cache uses a single port since it handles a single request, but we made this change to take advantage of HPDC’s ability to handle multiple requests.</p> <p>Currently, this PR has not yet passed the RISC-V tests and is still being debugged. After passing the tests, I plan to add a feature that makes it configurable to switch between the original instruction cache and the instruction cache using HPDC. Then, I will split the PR into separate parts for easier review and aim to merge them. (<a href="(https://github.com/openhwgroup/cva6/pull/2269)">PR#2269</a> is a partial implementation of the adapter.)</p> </li> </ul> <div class="column"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/obi_req_diagram-480.webp 480w,/assets/img/obi_req_diagram-800.webp 800w,/assets/img/obi_req_diagram-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/obi_req_diagram.jpg" class="img-fluid rounded z-depth-1 " width="100%" height="auto" title="obi_req diagram" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/obi_req_wave-480.webp 480w,/assets/img/obi_req_wave-800.webp 800w,/assets/img/obi_req_wave-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/obi_req_wave.jpg" class="img-fluid rounded z-depth-1 " width="100%" height="auto" title="obi_req wave" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Figure3: a diagram of the new core→icache communication protocol consisting of OBI and sideband signals (above) <br> and its actual waveform (below) </div> <p><br> <br></p> <h2 id="ongoing-development">Ongoing development</h2> <p>The following are the tasks I will continue working on:</p> <ul> <li>continuing debugging until the riscv tests pass</li> <li>adding a feature that makes it configurable to switch between the original instruction cache and the instruction cache using HPDC</li> <li>Creating PRs for each part and submit them for review</li> <li>Validating modifications in synthesis (ASIC and FPGA)</li> </ul> </article> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2025 Akiho Kawada. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>addBackToTop();</script> </body> </html>